<!DOCTYPE html>
<html lang="es">
	<head>
		<title>Clase 07</title>
		<meta charset="utf-8">
	</head>
	<body>
		<progress min="0" max="100" value="0"></progress>
		
		<script>
			const xhr = new XMLHttpRequest();
			const p = document.querySelector('progress');
			xhr.responseType = 'blob';

			xhr.addEventListener('progress', e =>{
				//console.log(e);	
				const cargado = e.loaded * 100 / e.total;
				//console.log(cargado);
				p.value = cargado;
			});

			xhr.addEventListener('load', e => {
				//console.log(xhr.response);
				const blob = xhr.response;

				const url = URL.createObjectURL(blob);

				//console.log(blob);

				const img = document.createElement('img');

				img.src = url;

				document.body.appendChild(img); 
			})	

			xhr.open('get', 'imagen.jpg');

			xhr.send();
		</script>
	</body>
</html>